<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Catatan Tempel Digital</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #f0f0f0;
        }

        h1 {
            text-align: center;
        }

        .input-area {
            text-align: center;
            margin-bottom: 20px;
        }

        textarea {
            width: 300px;
            height: 80px;
            padding: 10px;
            border-radius: 8px;
            resize: none;
        }

        button {
            margin-top: 10px;
            padding: 8px 15px;
            border: none;
            border-radius: 6px;
            background: #2196F3;
            color: white;
            cursor: pointer;
        }

        button:hover {
            background: #1976D2;
        }

        .note {
            width: 180px;
            min-height: 140px;
            padding: 15px;
            position: absolute;
            border-radius: 10px;
            cursor: move;
            box-shadow: 3px 3px 10px rgba(0,0,0,0.2);
        }

        .delete {
            position: absolute;
            top: 6px;
            right: 10px;
            cursor: pointer;
            font-weight: bold;
        }

        footer {
            position: fixed;
            bottom: 10px;
            width: 100%;
            text-align: center;
            font-size: 13px;
            color: #555;
        }
    </style>
</head>
<body>

<h1>üóíÔ∏è Catatan Tempel Digital</h1>

<div class="input-area">
    <textarea id="noteInput" placeholder="Tulis catatan..."></textarea><br>
    <button onclick="tambahCatatan()">Tambah Catatan</button>
</div>

<footer>
    Tugas Pemrograman | Naely Khairo - 240602047
</footer>

<script>
    let notes = JSON.parse(localStorage.getItem("notes")) || [];

    function warnaAcak() {
        const warna = ["#FFEB3B", "#FFCDD2", "#C8E6C9", "#BBDEFB", "#E1BEE7"];
        return warna[Math.floor(Math.random() * warna.length)];
    }

    function simpanNotes() {
        localStorage.setItem("notes", JSON.stringify(notes));
    }

    function tambahCatatan() {
        const teks = document.getElementById("noteInput").value;
        if (teks === "") {
            alert("Catatan tidak boleh kosong!");
            return;
        }

        const noteData = {
            text: teks,
            x: 50,
            y: 200,
            color: warnaAcak()
        };

        notes.push(noteData);
        simpanNotes();
        tampilkanNotes();
        document.getElementById("noteInput").value = "";
    }

    function tampilkanNotes() {
        document.querySelectorAll(".note").forEach(n => n.remove());

        notes.forEach((note, index) => {
            const div = document.createElement("div");
            div.className = "note";
            div.style.background = note.color;
            div.style.left = note.x + "px";
            div.style.top = note.y + "px";

            div.innerHTML = `
                <span class="delete" onclick="hapusCatatan(${index})">√ó</span>
                ${note.text}
            `;

            dragNote(div, index);
            document.body.appendChild(div);
        });
    }

    function hapusCatatan(index) {
        notes.splice(index, 1);
        simpanNotes();
        tampilkanNotes();
    }

    function dragNote(element, index) {
        let offsetX, offsetY;

        element.onmousedown = function(e) {
            offsetX = e.clientX - element.offsetLeft;
            offsetY = e.clientY - element.offsetTop;

            document.onmousemove = function(e) {
                element.style.left = (e.clientX - offsetX) + "px";
                element.style.top = (e.clientY - offsetY) + "px";

                notes[index].x = element.offsetLeft;
                notes[index].y = element.offsetTop;
                simpanNotes();
            };

            document.onmouseup = function() {
                document.onmousemove = null;
            };
        };
    }

    tampilkanNotes();
</script>

</body>
</html>
